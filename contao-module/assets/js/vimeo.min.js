!function(a,b){"function"==typeof define&&define.amd?define(["video.js"],function(c){return a.Vimeo=b(c)}):"object"==typeof module&&module.exports?module.exports=a.Vimeo=b(require("video.js")):a.Vimeo=b(a.videojs)}(this,function(a){"use strict";function f(){var a=".vjs-vimeo .vjs-iframe-blocker { display: none; }.vjs-vimeo.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-vimeo .vjs-poster { background-size: cover; }.vjs-vimeo { height:100%; }.vimeoplayer { width:100%; height:180%; position:absolute; left:0; top:-40%; }",b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)}var b={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},c=a.getComponent("Tech"),d=a.extend(c,{constructor:function(a,b){c.call(this,a,b),""!=a.poster&&this.setPoster(a.poster),this.setSrc(this.options_.source,!0),setTimeout(function(){this.el_.parentNode.className+=" vjs-vimeo"}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-vimeo","")},createEl:function(){this.vimeo={},this.vimeoInfo={},this.baseUrl="https://player.vimeo.com/video/",this.baseApiUrl="http://www.vimeo.com/api/v2/video/",this.videoId=d.parseUrl(this.options_.source.src).videoId,this.iframe=document.createElement("iframe"),this.iframe.setAttribute("id",this.options_.techId),this.iframe.setAttribute("title","Vimeo Video Player"),this.iframe.setAttribute("class","vimeoplayer"),this.iframe.setAttribute("src",this.baseUrl+this.videoId+"?api=1&player_id="+this.options_.techId),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginWidth","0"),this.iframe.setAttribute("marginHeight","0"),this.iframe.setAttribute("webkitAllowFullScreen","0"),this.iframe.setAttribute("mozallowfullscreen","0"),this.iframe.setAttribute("allowFullScreen","0");var a=document.createElement("div");if(a.setAttribute("style","margin:0 auto;padding-bottom:56.25%;width:100%;height:0;position:relative;overflow:hidden;"),a.setAttribute("class","vimeoFrame"),a.appendChild(this.iframe),!e&&!this.options_.ytControls){var b=document.createElement("div");b.setAttribute("class","vjs-iframe-blocker"),b.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),b.onclick=function(){this.onPause()}.bind(this),a.appendChild(b)}return d.isApiReady?this.initPlayer():d.apiReadyQueue.push(this),""==this.options_.poster&&$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(a){return function(b){a.setPoster(b[0].thumbnail_large)}}(this)),a},initPlayer:function(){var a=this;d.parseUrl(this.options_.source.src).videoId;this.vimeo&&this.vimeo.api&&(this.vimeo.api("unload"),delete this.vimeo),a.vimeo=$f(a.iframe),a.vimeoInfo={state:b.UNSTARTED,volume:1,muted:!1,muteVolume:1,time:0,duration:0,buffered:0,url:a.baseUrl+a.videoId,error:null},this.vimeo.addEvent("ready",function(b){a.onReady(),a.vimeo.addEvent("loadProgress",function(b,c){a.onLoadProgress(b)}),a.vimeo.addEvent("playProgress",function(b,c){a.onPlayProgress(b)}),a.vimeo.addEvent("play",function(b){a.onPlay()}),a.vimeo.addEvent("pause",function(b){a.onPause()}),a.vimeo.addEvent("finish",function(b){a.onFinish()}),a.vimeo.addEvent("seek",function(b,c){a.onSeek(b)})})},onReady:function(){this.isReady_=!0,this.triggerReady(),this.trigger("loadedmetadata"),this.startMuted&&(this.setMuted(!0),this.startMuted=!1),this.playOnReady&&this.play()},onLoadProgress:function(a){var b=!this.vimeoInfo.duration;this.vimeoInfo.duration=a.duration,this.vimeoInfo.buffered=a.percent,this.trigger("progress"),b&&this.trigger("durationchange")},onPlayProgress:function(a){this.vimeoInfo.time=a.seconds,this.trigger("timeupdate")},onPlay:function(){this.vimeoInfo.state=b.PLAYING,this.trigger("play")},onPause:function(){this.vimeoInfo.state=b.PAUSED,this.trigger("pause")},onFinish:function(){this.vimeoInfo.state=b.ENDED,this.trigger("ended")},onSeek:function(a){this.trigger("seeking"),this.vimeoInfo.time=a.seconds,this.trigger("timeupdate"),this.trigger("seeked")},onError:function(a){this.error=a,this.trigger("error")},error:function(){switch(this.errorNumber){case 2:return{code:"Unable to find the video"};case 5:return{code:"Error while trying to play the video"};case 100:return{code:"Unable to find the video"};case 101:case 150:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"Vimeo unknown error ("+this.errorNumber+")"}},src:function(){return this.source},poster:function(){return this.poster_},setPoster:function(a){this.poster_=a},setSrc:function(a){a&&a.src&&(this.source=a,this.url=d.parseUrl(a.src),this.options_.poster||this.url.videoId&&($.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(a){return function(b){a.poster_=b[0].thumbnail_small}}(this)),this.checkHighResPoster()),this.options_.autoplay&&!e&&(this.isReady_?this.play():this.playOnReady=!0))},supportsFullScreen:function(){return!0},load:function(){},play:function(){this.vimeo.api("play")},pause:function(){this.vimeo.api("pause")},paused:function(){return this.vimeoInfo.state!==b.PLAYING&&this.vimeoInfo.state!==b.BUFFERING},currentTime:function(){return this.vimeoInfo.time||0},setCurrentTime:function(a){this.vimeo.api("seekTo",a),this.player_.trigger("timeupdate")},duration:function(){return this.vimeoInfo.duration||0},buffered:function(){return a.createTimeRange(0,this.vimeoInfo.buffered*this.vimeoInfo.duration||0)},volume:function(){return this.vimeoInfo.muted?this.vimeoInfo.muteVolume:this.vimeoInfo.volume},setVolume:function(a){this.vimeo.api("setvolume",a),this.vimeoInfo.volume=a,this.player_.trigger("volumechange")},currentSrc:function(){return this.el_.src},muted:function(){return this.vimeoInfo.muted||!1},setMuted:function(a){a?(this.vimeoInfo.muteVolume=this.vimeoInfo.volume,this.setVolume(0)):this.setVolume(this.vimeoInfo.muteVolume),this.vimeoInfo.muted=a,this.player_.trigger("volumechange")},checkHighResPoster:function(){var a="";try{$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},function(a){return function(b){a=b[0].thumbnail_large}}(a));var b=new Image;b.onload=function(){if("naturalHeight"in this){if(this.naturalHeight<=90||this.naturalWidth<=120)return void this.onerror()}else if(this.height<=90||this.width<=120)return void this.onerror();this.poster_=a,this.trigger("posterchange")}.bind(this),b.onerror=function(){},b.src=a}catch(a){}}});d.isSupported=function(){return!0},d.canPlaySource=function(a){return"video/vimeo"===a.type};var e=/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);d.parseUrl=function(a){var b={videoId:null},c=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,d=a.match(c);return d&&(b.videoId=d[5]),b},d.apiReadyQueue=[];var g=function(){d.isApiReady=!0,f();for(var a=0;a<d.apiReadyQueue.length;++a)d.apiReadyQueue[a].initPlayer()};g(),a.registerTech("Vimeo",d);(function(){function a(b){return new a.fn.init(b)}function g(a,b,c){if(!c.contentWindow.postMessage)return!1;var d=JSON.stringify({method:a,value:b});c.contentWindow.postMessage(d,f)}function h(a){var b,c;try{b=JSON.parse(a.data),c=b.event||b.method}catch(a){}if("ready"!=c||d||(d=!0),!/^https?:\/\/player.vimeo.com/.test(a.origin))return!1;"*"===f&&(f=a.origin);var e=b.value,g=b.data,h=""===h?null:b.player_id,i=j(c,h),k=[];return!!i&&(void 0!==e&&k.push(e),g&&k.push(g),h&&k.push(h),k.length>0?i.apply(null,k):i.call())}function i(a,c,d){d?(b[d]||(b[d]={}),b[d][a]=c):b[a]=c}function j(a,c){return c&&b[c]?b[c][a]:b[a]?b[a]:void 0}function k(a,c){if(c&&b[c]){if(!b[c][a])return!1;b[c][a]=null}else{if(!b[a])return!1;b[a]=null}return!0}function l(a){return!!(a&&a.constructor&&a.call&&a.apply)}var b={},d=!1,f=(Array.prototype.slice,"*");return a.fn=a.prototype={element:null,init:function(a){return"string"==typeof a&&(a=document.getElementById(a)),this.element=a,this},api:function(a,b){if(!this.element||!a)return!1;var c=this,d=c.element,e=""!==d.id?d.id:null,f=l(b)?null:b,h=l(b)?b:null;return h&&i(a,h,e),g(a,f,d),c},addEvent:function(a,b){if(!this.element)return!1;var c=this,e=c.element,f=""!==e.id?e.id:null;return i(a,b,f),"ready"!=a?g("addEventListener",a,e):"ready"==a&&d&&b.call(null,f),c},removeEvent:function(a){if(!this.element)return!1;var b=this,c=b.element,d=""!==c.id?c.id:null,e=k(a,d);"ready"!=a&&e&&g("removeEventListener",a,c)}},a.fn.init.prototype=a.fn,window.addEventListener?window.addEventListener("message",h,!1):window.attachEvent("onmessage",h),window.Froogaloop=window.$f=a})()});